# Landing blocks / CMS-ready –≤–µ—Ä—Å—Ç–∫–∞

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ **–±–ª–æ—á–Ω–æ–π –≤–µ—Ä—Å—Ç–∫–∏**, –∫–æ—Ç–æ—Ä–∞—è:

- —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ —Å —É–¥–æ–±–Ω—ã–º dev-–æ–∫—Ä—É–∂–µ–Ω–∏–µ–º
- –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è **–≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä—è–º–æ –Ω–∞ –±–æ–µ–≤–æ–º —Å–∞–π—Ç–µ** —á–µ—Ä–µ–∑ Tampermonkey
- —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –≤ **CMS-–≥–æ—Ç–æ–≤—ã–µ HTML-—Ñ–∞–π–ª—ã**
- –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–æ–∫ –ø—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ CMS

---

## –ö–ª—é—á–µ–≤–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞

üî• **Realtime-–≤–µ—Ä—Å—Ç–∫–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —Å–∞–π—Ç–µ —á–µ—Ä–µ–∑ Tampermonkey**

–ë–ª–∞–≥–æ–¥–∞—Ä—è —Å–≤—è–∑–∫–µ **Vite + vite-plugin-monkey + Tampermonkey**:

- –≤–µ—Ä—Å—Ç–∫–∞ –∏–Ω–∂–µ–∫—Ç–∏—Ç—Å—è **–ø—Ä—è–º–æ –≤ –±–æ–µ–≤–æ–π —Å–∞–π—Ç**, –∞ –Ω–µ –≤ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π localhost
- HTML / CSS / JS –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ**
- –º–æ–∂–Ω–æ –≤–µ—Ä—Å—Ç–∞—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–ª–æ–∫–∏ **–≤ —Ä–µ–∞–ª—å–Ω–æ–º DOM —Å–∞–π—Ç–∞**
- –Ω–µ –Ω—É–∂–Ω–æ –∂–¥–∞—Ç—å CMS, –¥–µ–ø–ª–æ–π –∏–ª–∏ —Å–±–æ—Ä–∫—É

üëâ –≠—Ç–æ —Å–∏–ª—å–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç –≤–µ—Ä—Å—Ç–∫—É –∏ —Å–Ω–∏–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –±–∞–≥–æ–≤.

---

## –û–±—â–∞—è –∏–¥–µ—è

- **`src/order.json`** ‚Äî –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–æ—Ä—è–¥–∫–∞ –±–ª–æ–∫–æ–≤
- –∫–∞–∂–¥—ã–π –±–ª–æ–∫ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –æ–¥–Ω–∏–º –∫–ª—é—á–æ–º (`hero`, `welcome`, `test`)
- –±–ª–æ–∫ –º–æ–∂–µ—Ç —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑:
    - —Ä–∞–∑–º–µ—Ç–∫–∏ (`markup`)
    - —Å—Ç–∏–ª–µ–π (`styles`)
    - —Å–∫—Ä–∏–ø—Ç–æ–≤ (`scripts`)
- –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Ç–∏–ª–µ–π –∏–ª–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤ ‚Äî **–Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –∏ –æ–∂–∏–¥–∞–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```txt
src/
  order.json

  markup/
    hero.html
    welcome.html

  styles/
    hero.scss
    welcome.css

  scripts/
    hero.js
    welcome.js

  lib/
    gen-markup-index.mjs
    gen-styles-index.mjs
    gen-scripts-index.mjs
    build-cms.mjs
    rewriteAssetsBuild.mjs
    cdn-server.mjs

public/
  hero-bg.jpg
  banner.png
  promo.webp

@CMS/
  hero.html
  welcome.html
```

---

## order.json

`src/order.json` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç **–ø–æ—Ä—è–¥–æ–∫ –±–ª–æ–∫–æ–≤**:

```json
{
  "blocks": [
    "hero",
    "welcome",
    "test"
  ]
}
```

‚ö†Ô∏è –£–∫–∞–∑—ã–≤–∞—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ –∫–ª—é—á–∏**, –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π.

–ü–æ –∫–ª—é—á—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—â—É—Ç—Å—è —Ñ–∞–π–ª—ã:

- `markup/<key>.html`
- `styles/<key>.scss` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
- `styles/<key>.css`
- `scripts/<key>.js`

---

## –†–∞–∑–º–µ—Ç–∫–∞ (markup)

üìÅ `src/markup/<key>.html`

- –æ–±—ã—á–Ω—ã–π HTML
- **–±–µ–∑ –æ–±–µ—Ä—Ç–æ–∫**
- **–±–µ–∑ —Å–ª—É–∂–µ–±–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤**
- –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ CMS **–∫–∞–∫ –µ—Å—Ç—å**

–ü—Ä–∏–º–µ—Ä:

```html

<section class="hero" id="test">
    <h1>–ó–∞–≥–æ–ª–æ–≤–æ–∫</h1>
</section>
```

–ï—Å–ª–∏ —Ñ–∞–π–ª–∞ –Ω–µ—Ç ‚Äî –±–ª–æ–∫ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è.

---

## –°—Ç–∏–ª–∏ (styles)

üìÅ `src/styles/<key>.scss | <key>.css`

- –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è **SCSS**
- –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@use`, –∏–º–ø–æ—Ä—Ç—ã, –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å
- —Å–±–æ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ **Vite**
- –ø—Ä–∏ CMS-—Å–±–æ—Ä–∫–µ:
    - —Å—Ç–∏–ª–∏ –º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è
    - –∏–Ω–ª–∞–π–Ω—è—Ç—Å—è –≤ `<style>`
- –µ—Å–ª–∏ —Å—Ç–∏–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∏–∑ JS –∏–ª–∏ Vue ‚Äî –æ–Ω–∏ —Ç–æ–∂–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –∏—Ç–æ–≥–æ–≤—ã–π HTML

---

## –°–∫—Ä–∏–ø—Ç—ã (scripts)

üìÅ `src/scripts/<key>.js`

### –ö–æ–Ω—Ç—Ä–∞–∫—Ç (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

–ö–∞–∂–¥—ã–π —Å–∫—Ä–∏–ø—Ç **–æ–±—è–∑–∞–Ω —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `default`-—Ñ—É–Ω–∫—Ü–∏—é**.

```js
export default function init() {
  const host = document.querySelector("#test");
  if (!host) return;

  const el = document.createElement("span");
  el.textContent = "–¢–µ–∫—Å—Ç –∏–∑ —Å–∫—Ä–∏–ø—Ç–∞";
  host.appendChild(el);
}
```

### –ü–æ–≤–µ–¥–µ–Ω–∏–µ

- **dev**:
    - —Ä–∞–∑–º–µ—Ç–∫–∞ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ DOM
    - –∑–∞—Ç–µ–º –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `init()`

- **CMS build**:
    - JS –∏–Ω–ª–∞–π–Ω–∏—Ç—Å—è –≤ `<script>`
    - `init()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

‚ùå –ù–ï –Ω—É–∂–Ω–æ:

- IIFE
- `DOMContentLoaded`
- –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–∞–π–¥-—ç—Ñ—Ñ–µ–∫—Ç—ã
- –ø—Ä–∏–≤—è–∑–∫–∞ –∫ dev-–æ–∫—Ä—É–∂–µ–Ω–∏—é

---

## Vue –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–æ–≤

–†–∞–∑—Ä–µ—à–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Vue** –≤–Ω—É—Ç—Ä–∏ `scripts/<key>.js`.

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è:

- `.vue` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `<style scoped>`
- `lang="scss"`
- `@use` –∏ –∏–º–ø–æ—Ä—Ç—ã SCSS

–í—Å–µ —Å—Ç–∏–ª–∏ –∏–∑ Vue **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–ª–∞–π–Ω—è—Ç—Å—è** –≤ –∏—Ç–æ–≥–æ–≤—ã–π HTML –±–ª–æ–∫–∞.

---

## –†–∞–±–æ—Ç–∞ —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏

### –•—Ä–∞–Ω–µ–Ω–∏–µ

–í—Å–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∫–ª–∞–¥—É—Ç—Å—è **–≤ –∫–æ—Ä–µ–Ω—å –ø–∞–ø–∫–∏ `public/`**:

```txt
public/
  hero-bg.jpg
  banner.png
  promo.webp
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```html
<img src="/hero-bg.jpg" alt="">
```

```css
.hero {
    background-image: url("/hero-bg.jpg");
}
```

‚ùå –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º `localhost`  
‚ùå –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º `img/`, `assets` –∏ –¥—Ä—É–≥–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã

---

## Express CDN (dev)

–í dev-—Ä–µ–∂–∏–º–µ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è **–ª–æ–∫–∞–ª—å–Ω—ã–π CDN**:

```bash
npm run cdn
```

- —Ä–∞–∑–¥–∞–µ—Ç –ø–∞–ø–∫—É `public/` –∫–∞–∫ –∫–æ—Ä–µ–Ω—å `/`
- –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:3001`
- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –≤ dev**

Tampermonkey –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—É—Ç–∏:

```
/hero-bg.jpg ‚Üí http://localhost:3001/hero-bg.jpg
```

–ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ **—Å—Ç—Ä–æ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º –≤–µ—Ä—Å—Ç–∫–∏**,  
–∫–∞—Ä—Ç–∏–Ω–∫–∏ –≤—Å–µ–≥–æ —Å–∞–π—Ç–∞ –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç—Å—è.

---

## Dev-—Ä–µ–∂–∏–º (Realtime)

```bash
npm run dev
```

–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

- –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è index-—Ñ–∞–π–ª—ã
- –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤–æ—Ç—á–µ—Ä—ã —Ä–∞–∑–º–µ—Ç–∫–∏ / —Å—Ç–∏–ª–µ–π / —Å–∫—Ä–∏–ø—Ç–æ–≤
- –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è Vite + Tampermonkey
- –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è Express CDN
- –≤–µ—Ä—Å—Ç–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è **–ø—Ä—è–º–æ –Ω–∞ —Å–∞–π—Ç–µ**
- –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ**

‚ö†Ô∏è `vite-plugin-monkey` —Ä–∞–±–æ—Ç–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –≤ dev**  
–∏ **–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ CMS build**.

---

## CMS build

```bash
npm run build
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:

- —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø–∞–ø–∫–∞ `@CMS`
- –∫–∞–∂–¥—ã–π –±–ª–æ–∫ –∏–∑ `order.json` ‚Üí –æ—Ç–¥–µ–ª—å–Ω—ã–π HTML-—Ñ–∞–π–ª

–§–æ—Ä–º–∞—Ç:

```html

<style>
    /* –º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π CSS */
</style>

<!-- HTML –±–ª–æ–∫–∞ -->

<script>
    /* –º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JS */
</script>
```

–ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–µ–Ω –∏ –≥–æ—Ç–æ–≤ –¥–ª—è CMS.

---

## Rewrite –ø—É—Ç–µ–π –∫–∞—Ä—Ç–∏–Ω–æ–∫ –ø–æ–¥ CMS

–ï—Å–ª–∏ CMS —Ç—Ä–µ–±—É–µ—Ç –¥—Ä—É–≥–æ–π –ø—É—Ç—å –¥–ª—è –∫–∞—Ä—Ç–∏–Ω–æ–∫:

```bash
npm run build -- /upload/blocks
```

–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

1. –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è CMS build
2. –ø—É—Ç–∏ –∫ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è:

- –∏–∑ `/hero-bg.jpg`
- –≤ `/upload/blocks/hero-bg.jpg`

–ï—Å–ª–∏ –∞—Ä–≥—É–º–µ–Ω—Ç **–Ω–µ –ø–µ—Ä–µ–¥–∞–Ω**, rewrite –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è.

### –ß—Ç–æ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è

- `<img src>`
- `<img srcset>`
- `<source srcset>`
- `poster`
- `url("/...")` –≤–Ω—É—Ç—Ä–∏ `<style>` –∏ inline-—Å—Ç–∏–ª–µ–π

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:

```
jpg / jpeg / png / webp
```

‚ùå —Å–∫—Ä–∏–ø—Ç—ã, —Å—Å—ã–ª–∫–∏ –∏ —à—Ä–∏—Ñ—Ç—ã –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç—Å—è

---

## CLI –¥–ª—è –±–ª–æ–∫–æ–≤

### –°–æ–∑–¥–∞–Ω–∏–µ –±–ª–æ–∫–∞

```bash
npm run block:add hero
```

–°–æ–∑–¥–∞–µ—Ç:

- `markup/hero.html`
- `styles/hero.scss`
- `scripts/hero.js`
- –¥–æ–±–∞–≤–ª—è–µ—Ç `hero` –≤ `order.json`

### –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–∞

```bash
npm run block:rename hero intro
```

- –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã
- –æ–±–Ω–æ–≤–ª—è–µ—Ç `order.json`
- **–Ω–∏—á–µ–≥–æ –Ω–µ —É–¥–∞–ª—è–µ—Ç**

---

## –ß—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º

‚úî –±–ª–æ–∫ –±–µ–∑ —Å—Ç–∏–ª–µ–π  
‚úî –±–ª–æ–∫ –±–µ–∑ —Å–∫—Ä–∏–ø—Ç–æ–≤  
‚úî –±–ª–æ–∫ —Ç–æ–ª—å–∫–æ —Å HTML  
‚úî –∫–ª—é—á –≤ `order.json` –±–µ–∑ —Ñ–∞–π–ª–æ–≤  
‚úî defensive-–ª–æ–≥–∏–∫–∞ –≤ JS

---

## –ß—Ç–æ –ù–ï –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è

‚ùå —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤ `order.json`  
‚ùå IIFE –≤ `scripts/*.js`  
‚ùå `DOMContentLoaded`  
‚ùå dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ CMS  
‚ùå —Å–ª—É–∂–µ–±–Ω—ã–µ –æ–±–µ—Ä—Ç–∫–∏ –≤ —Ä–∞–∑–º–µ—Ç–∫–µ

---

## –ß–µ–∫–ª–∏—Å—Ç –≤–µ—Ä—Å—Ç–∫–∏ –±–ª–æ–∫–∞

1. –î–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á –≤ `src/order.json`
2. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã –±–ª–æ–∫–∞ (–∏–ª–∏ `block:add`)
3. –°–≤–µ—Ä—Å—Ç–∞—Ç—å HTML
4. (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –¥–æ–±–∞–≤–∏—Ç—å SCSS
5. (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –¥–æ–±–∞–≤–∏—Ç—å JS —Å `export default`
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ `npm run dev`
7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç `npm run build`
